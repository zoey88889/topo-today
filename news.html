<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- é¡¶éƒ¨ä»‹ç»åŒº -->
  <header class="hero">
    <h1>ğŸ“° çº½çº¦çƒ­é—¨å¤´æ¡ Hot Picks</h1>
    <p>è‡ªåŠ¨æ±‡èšå…¨çƒçƒ­ç‚¹ Â· AI ç²¾é€‰ç”Ÿæˆ Â· å®æ—¶åŒæ­¥</p >
  </header>
  
  <link rel="stylesheet" href="styles/styles.css" />

  <!-- ç®€ä»‹æ–‡æ¡ˆ -->
  <section class="intro">
    <p>
     
      <br />æœ¬é¡µé¢ç”± TOPO è‡ªåŠ¨ç”Ÿæˆï¼Œæ¯æ—¥æ›´æ–° 3ï½5 æ¡ç²¾é€‰èµ„è®¯ã€‚
      å†…å®¹æ¶µç›–ç”Ÿæ´»æé†’ã€ç¤¾åŒºæ–°é—»ã€æ”¿ç­–å˜åŒ–ç­‰ã€‚
    </p >
  </section>
  <style>
    body {
      background: linear-gradient(to bottom, #f5f7fa, #e2eafc);
      font-family: 'Helvetica Neue', sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
    }
    .hero {
      background: linear-gradient(to right, #3f51b5, #5c6bc0);
      color: white;
      text-align: center;
      padding: 2.5rem 1rem 2rem;
      border-bottom: 4px solid #303f9f;
    }
    .hero h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .hero p {
      font-size: 1rem;
      opacity: 0.85;
    }
    .language-switcher {
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
    .language-switcher select {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .intro {
      text-align: center;
      margin: 1rem auto 2rem;
      max-width: 680px;
    }
    .category-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 1rem;
      padding: 0 1rem;
      max-width: 960px;
      margin: 0 auto 2rem;
    }
    .card {
      background: #ffffff;
      border-left: 6px solid #3f51b5;
      padding: 1.2rem;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      text-align: center;
      text-decoration: none;
      color: #333;
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-3px);
      background: #f5f5f5;
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.8rem;
      color: #777;
      border-top: 1px solid #ccc;
    }
  </style>
</head>




  <section class="modules" id="postContainer">
    <!-- æ‰€æœ‰æ–°é—»å¡ç‰‡å°†ç”± post-display.js è‡ªåŠ¨æ³¨å…¥ -->
  </section>
  <div id="rssContainer" class="modules" style="padding:2rem;"></div>
<script>
async function fetchRSSFeed() {
  const rssUrl = "https://rss.nytimes.com/services/xml/rss/nyt/NYRegion.xml"; // âœ… çº½çº¦æ—¶æŠ¥Â·æœ¬åœ°é¢‘é“
  const apiKey = "mbj1ikgixnoynk0wmg2ufpbcuc2vkfzhzxjqrccz";  // â† å¯é€‰ï¼Œå¦‚æœ‰ rss2json çš„ API keyï¼Œå¯åŠ é€Ÿ
  const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

  const res = await fetch(apiUrl);
  const json = await res.json();

  const items = json.items || [];
  const container = document.getElementById("rssContainer");
  container.innerHTML = "";

 if (items.length === 0) {
  container.innerHTML = `
    <div style="text-align:center; font-size:0.95rem;">
      ğŸ›°ï¸ TOPO AI æ’­æŠ¥å‘˜ DodvaBot æ­£åœ¨èµ¶å¾€ç°åœºâ€¦
      <br />
      â³ è¯·ç¨å€™ï¼Œæ–°é—»å³å°†æŠµè¾¾åœ°çƒç«™ï¼
    </div>`;
  return;
}

  items.forEach((item, index) => {
    if (index >= 5) return; // é™åˆ¶ 5 æ¡
    const title = item.title || "æ— æ ‡é¢˜";
    const desc = item.description || "æ— æè¿°";
    const link = item.link || "#";

    const card = document.createElement("div");
    card.className = "card";
 card.style = `
  background: #000;
  border-left: 6px solid #0ff;
  padding: 1.2rem;
  margin-bottom: 1.2rem;
  border-radius: 10px;
  color: #fff;
`;
function generateSummary(description) {
  if (!description) return "ğŸ§  TOPO AI æ­£åœ¨ç”Ÿæˆæ‘˜è¦ï¼Œè¯·ç¨ååˆ·æ–°æŸ¥çœ‹";
  const clean = description.replace(/<[^>]+>/g, "").slice(0, 100);
  return `ğŸ¤– TOPO æ‘˜è¦ï¼š${clean}...`;
}
const summary = generateSummary(item.description);

card.innerHTML = `
  <h3>ğŸ“° ${title}</h3>
  <p>${summary}</p >
  <small>æ¥æºï¼šNew York Times Â· <a href=" " target="_blank" style="color: #0af;">æŸ¥çœ‹åŸæ–‡</a ></small>
`;
    container.appendChild(card);
  });
}

fetchRSSFeed();
  </script>
  <!-- è„šæœ¬åŠ è½½ -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="scripts/supabase.js"></script>
  <script src="scripts/post-upload.js"></script>
  <script src="scripts/post-display.js"></script>

  <!-- é¡µè„š -->
  <div id="footer"></div>
  <script>
    fetch("/components/footer.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("footer").innerHTML = html;
      });
  </script>
    <!-- å¤šè¯­è¨€åˆ‡æ¢è„šæœ¬ï¼ˆå¯é€‰ï¼‰ -->
  <script>
    document.getElementById('langswitcher').addEventListener('change', function () {
      const lang = this.value;
      if (lang === 'zh') {
        document.querySelector('h1').innerText = "ğŸ“° ä»Šæ—¥è¦é—»";
        document.querySelector('.hero p').innerText = "è‡ªåŠ¨æ±‡èšçº½çº¦åäººåœˆä¸æœ¬åœ°ç”Ÿæ´»æ–°é—»";
      } else if (lang === 'en') {
        document.querySelector('h1').innerText = "ğŸ“° Today's News";
        document.querySelector('.hero p').innerText = "Automatically curated headlines from the NYC Chinese community.";
      } else if (lang === 'ko') {
        document.querySelector('h1').innerText = "ğŸ“° ì˜¤ëŠ˜ì˜ ë‰´ìŠ¤";
        document.querySelector('.hero p').innerText = "ë‰´ìš• ì¤‘êµ­ ì»¤ë®¤ë‹ˆí‹°ì˜ ì†Œì‹ì„ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.";
      }
    });
  </script>
  <!-- é¡µè„š -->
<div id="footer"></div>
<script>
  fetch("/components/footer.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("footer").innerHTML = html;
    });
</script>
</body>
</html>


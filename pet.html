
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ¾ èŒå® æ˜Ÿçƒ | TOPO TODAY</title>
  <link rel="stylesheet" href="styles/styles.css" />
</head>
<body>
  <header class="hero">
    <h1>ğŸ¾ èŒå® æ˜Ÿçƒ Pet Planet</h1>
    <p>æ¬¢è¿å‘å¸ƒèµ°å¤±å¯ç¤ºã€é¢†å…»ä¿¡æ¯ã€èŒå® æ™’ç…§ã€å® ç‰©æ´»åŠ¨ã€åŒ»ç”Ÿæ¨èç­‰å†…å®¹</p >
  </header>

  <!-- æŠ•ç¨¿è¡¨å• -->
  <section class="modules">
    <form id="postForm" enctype="multipart/form-data" style="background:#fff; padding:1.5rem; border-radius:12px; max-width:600px; margin:0 auto;">
      <input type="text" id="title" placeholder="æ ‡é¢˜ï¼šå¦‚ã€èµ°å¤±å¯»ç‹—ã€ã€å°çŒ«é¢†å…»ã€" required />
      <input type="file" id="imageUpload" accept="image/*" multiple />
      <textarea id="content" rows="5" placeholder="è¯¦ç»†æè¿°ï¼Œå¦‚å“ç§/ç‰¹å¾/åœ°ç‚¹/è”ç³»æ–¹å¼â€¦" required></textarea>
      <button type="submit" style="margin-top: 1rem;">âœ¨ å‘å¸ƒèŒå® åŠ¨æ€</button>
    </form>
  </section>

  <!-- ç”¨æˆ·å‘å¸–æ¸²æŸ“å®¹å™¨ -->
  <div id="postContainer" class="modules" style="padding:1rem;"></div>

  <!-- RSS æŠ“å–åŒºåŸŸï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰ -->
  <section class="modules" id="rssContainer" style="margin-top: 2rem;">
    <h2>ğŸ“¡ å®æ—¶å® ç‰©èµ„è®¯æ¨è</h2>
    <!-- è¿™é‡Œå°†åŠ¨æ€æ’å…¥RSSå¡ç‰‡ -->
  </section>

  <!-- å½“å‰é¡µé¢åˆ†ç±»è®¾å®š -->
  <script> window.TOPO_CATEGORY = "pet"; </script>

  <!-- åŠ è½½è„šæœ¬ -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="scripts/supabase.js"></script>
  <script src="scripts/post-upload.js"></script>
  <script src="scripts/post-display.js"></script>

  <!-- RSS æŠ“å–è„šæœ¬ï¼ˆASPCA / Petfinderï¼‰ -->
  <script>
    async function fetchPetRSS() {
      const rssUrl = "https://www.petfinder.com/blog/feed/"; // å¯æ¢æˆ ASPCA ä¹Ÿæ”¯æŒçš„ RSS
      const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
      const res = await fetch(apiUrl);
      const json = await res.json();
      const items = json.items || [];

      const container = document.getElementById("rssContainer");

      items.slice(0, 5).forEach((item) => {
        const card = document.createElement("div");
        card.className = "card";
        card.style = `
          background: #e8f5e9;
          border-left: 6px solid #66bb6a;
          padding: 1rem;
          margin-bottom: 1rem;
          border-radius: 10px;
        `;
        card.innerHTML = `
          <h3>ğŸ¶ ${item.title}</h3>
          <p>${item.description}</p >
          <a href=" " target="_blank">ğŸ”— æŸ¥çœ‹è¯¦æƒ…</a >
        `;
        container.appendChild(card);
      });
    }

    fetchPetRSS();
  </script>

<script>
  
  
  // åˆå§‹åŒ–åœ°å›¾
  const map = L.map('dogMap').setView([40.730610, -73.935242], 11); // çº½çº¦åæ ‡

  // åŠ è½½åœ°å›¾å›¾å±‚ï¼ˆOpenStreetMapï¼‰
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // æ·»åŠ ç‹—ç‹—å…¬å›­ä½ç½®ï¼ˆç¤ºä¾‹3ä¸ªï¼‰
  const dogParks = [
    {
      name: "Tompkins Square Dog Run",
      coords: [40.726477, -73.981533]
    },
    {
      name: "Madison Square Park Dog Run",
      coords: [40.742046, -73.987563]
    },
    {
      name: "Washington Square Park Dog Run",
      coords: [40.730822, -73.997332]
    }
  ];

  // åœ¨åœ°å›¾ä¸Šæ·»åŠ æ ‡è®°
  dogParks.forEach(park => {
    L.marker(park.coords).addTo(map)
      .bindPopup(`<strong>${park.name}</strong>`);
  });
</script>
<!-- Leaflet åœ°å›¾æ ·å¼ -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />

<!-- Leaflet åœ°å›¾è„šæœ¬ -->
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

  <!-- é¡µè„š -->
  <div id="footer"></div>
  <script>
    fetch("/components/footer.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("footer").innerHTML = html;
      });
  </script>

</body>
</html>